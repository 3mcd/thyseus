(function(u,S){typeof exports=="object"&&typeof module<"u"?S(exports):typeof define=="function"&&define.amd?define(["exports"],S):(u=typeof globalThis<"u"?globalThis:u||self,S(u.Thyseus={}))})(this,function(u){"use strict";const S=Symbol("Thread::Send"),tt=Symbol("Thread::Receive"),c={Send:S,Receive:tt},$="@SERIALIZED";class p{static isMainThread=!!globalThis.document;static spawn(t,e,i){return new this(p.isMainThread?Array.from({length:t},()=>new Worker(e,{type:"module"})):[globalThis],i)}#t=0;#e=new Map;#s={};#i;#n;constructor(t,e){this.#i=t,this.#n=e;const i=({currentTarget:n,data:[r,o,a]})=>{this.#e.has(r)?(this.#e.get(r)(this.#o(a)),this.#e.delete(r)):o in this.#s?n.postMessage([r,o,this.#r(this.#s[o](this.#o(a)))]):n.postMessage([r,o,null])};for(const n of this.#i)n.addEventListener("message",i)}setListener(t,e){this.#s[t]=e}deleteListener(t){delete this.#s[t]}send(t,e){const i=this.#r(e);return Promise.all(this.#i.map(n=>{const r=this.#t++;return n.postMessage([r,t,i]),new Promise(o=>this.#e.set(r,o))}))}async sendOrReceive(t){const e="@@";if(p.isMainThread){const i=t();return await this.send(e,i),i}else{const i=await new Promise(n=>this.setListener(e,n));return this.deleteListener(e),i}}#r(t){if(typeof t!="object"||t===null)return t;if(et(t))return[$,this.#n.indexOf(t.constructor),this.#r(t[c.Send]())];for(const e in t)t[e]=this.#r(t[e],this.#n);return t}#o(t){if(nt(t)||rt(t))return t;if(st(t)){const[,e,i]=t,n=this.#o(i);return this.#n[e][c.Receive](n)}for(const e in t)t[e]=this.#o(t[e],this.#n);return t}}const et=s=>c.Send in s,st=s=>Array.isArray(s)&&s.length===3&&s[0]===$,it=Object.getPrototypeOf(Uint8Array),nt=s=>typeof s!="object"&&typeof s!="function"&&s!==null,rt=s=>s instanceof it||s instanceof DataView||s instanceof ArrayBuffer||typeof SharedArrayBuffer!==void 0&&s instanceof SharedArrayBuffer;function B(s){return typeof s=="function"&&c.Receive in s&&c.Send in s.prototype}const R=0b11111111n;class O{static with(t,e,i=!1){const n=i?SharedArrayBuffer:ArrayBuffer;return new this(t,e,new Uint8Array(new n(Math.ceil(t/8)*e)))}#t;width;length;#e;constructor(t,e,i){this.width=t,this.length=e,this.#e=i,this.#t=Math.ceil(this.width/8)}get bytesPerElement(){return this.#t}get byteLength(){return this.#e.byteLength}get(t){let e=0n;const i=this.#t*t;for(let n=0;n<this.#t;n++)e|=BigInt(this.#e[i+n])<<BigInt(n*8);return e}set(t,e){const i=this.#t*t;for(let n=0;n<this.#t;n++)this.#e[i+n]=Number(e>>BigInt(n*8)&R)}OR(t,e){const i=this.#t*t;for(let n=0;n<this.#t;n++)this.#e[i+n]|=Number(e>>BigInt(n*8)&R)}AND(t,e){const i=this.#t*t;for(let n=0;n<this.#t;n++)this.#e[i+n]&=Number(e>>BigInt(n*8)&R)}XOR(t,e){const i=this.#t*t;for(let n=0;n<this.#t;n++)this.#e[i+n]^=Number(e>>BigInt(n*8)&R)}[c.Send](){return[this.width,this.length,this.#e]}static[c.Receive]([t,e,i]){return new this(t,e,i)}}const ot=s=>(s>>>=0,31-Math.clz32(s&-s));class at{#t;#e;static with(t,e){const i=e?SharedArrayBuffer:ArrayBuffer;return new this(new Uint32Array(new i(16)),new Uint32Array(new i(t)))}constructor(t,e){this.#t=t,this.#e=e}get(){for(let e=0;e<this.#e.length&&Atomics.load(this.#t,1)!==0;e++)for(;;){const i=Atomics.load(this.#e,e);if(i===0)break;const n=ot(i);if(Atomics.xor(this.#e,e,1<<n)===i)return Atomics.sub(this.#t,1,1),32*e+n}const t=Atomics.add(this.#t,0,1);if(t===4294967295)throw new Error("Too many entities spawned!");return t}free(t){(Atomics.or(this.#e,t>>5,1<<(t&31))&1<<(t&31))===0&&Atomics.add(this.#t,1,1)}[c.Send](){return[this.#t,this.#e]}static[c.Receive]([t,e]){return new this(t,e)}}function g(s,t,e=Error){if(!s)throw new e(t)}class N{#t;#e;constructor(t,e=new Int32Array(new SharedArrayBuffer(4))){this.#t=t,this.#e=e}get isLocked(){return this.#e[0]===1}UNSAFE_getData(){return this.#t}async request(t){await this.#s();const e=await t(this.#t);return this.#i(),e}async#s(){for(;;){if(Atomics.compareExchange(this.#e,0,0,1)===0)return;await Atomics.waitAsync(this.#e,0,1).value}}#i(){const t=Atomics.compareExchange(this.#e,0,1,0);Atomics.notify(this.#e,0),g(t===1,"Tried to unlock a mutex that was not locked.")}[c.Send](){return[this.#t,this.#e]}static[c.Receive]([t,e]){return new this(t,e)}}class F{static with(t,e=!1){const i=e?SharedArrayBuffer:ArrayBuffer;return new this(new Uint32Array(new i(t*4)),new Uint32Array(new i(t*4)),new Uint32Array(new i(4)))}sparse;dense;#t;constructor(t,e,i){this.sparse=t,this.dense=e,this.#t=i}get size(){return this.#t[0]}set size(t){this.#t[0]=t}has(t){return this.dense[this.sparse[t]]===t&&this.sparse[t]<this.size}add(t){if(this.has(t))return this;if(this.sparse.length<=t)throw new RangeError("Invalid index");return this.sparse[t]=this.size,this.dense[this.size]=t,this.size++,this}delete(t){if(!this.has(t))return!1;this.size--;const e=this.sparse[t];return this.dense[e]=this.dense[this.size],this.sparse[this.dense[e]]=e,!0}clear(){this.size=0}*[Symbol.iterator](){const t=this.size;for(let e=0;e<t;e++)yield this.dense[e]}[c.Send](){return[this.sparse,this.dense,this.#t]}static[c.Receive]([t,e,i]){return new this(t,e,i)}}class P{static from(t,e,i){return new this(t,e,F.with(t.length,!0),new N(O.with(t.length,2,!0)),i)}#t;#e;#s;#i;#n;#r;constructor(t,e,i,n,r){this.#e=t,this.#s=e,this.#i=i,this.#n=n,this.#t=new Int32Array(i[c.Send]()[2].buffer),this.#r=r}add(t){this.#i.add(t)}start(){Atomics.notify(this.#t,0)}reset(){const t=this.#n.UNSAFE_getData();t.set(0,0n),t.set(1,0n);for(let e=0;e<this.#s.length;e++)this.#r.has(e)||this.#i.add(e)}async onReady(t){const{async:e,value:i}=Atomics.waitAsync(this.#t,0,0);if(!e)throw new Error("Trying to wait while there are still systems to execute");await i,t()}async*[Symbol.asyncIterator](){const t=new Set(this.#r);for(;this.#i.size+t.size>0;){const e=this.#i.size;let i=-1;await this.#n.request(n=>{const r=n.get(0),o=n.get(1);for(const a of[...t,...this.#i])if((r&this.#e[a])===0n&&(o&this.#s[a])===this.#s[a]){i=a,this.#i.delete(a),t.delete(a),n.OR(0,1n<<BigInt(a));break}}),i>-1?(yield i,await this.#n.request(n=>{n.XOR(0,1n<<BigInt(i)),n.OR(1,1n<<BigInt(i)),(this.#t[0]!==0||this.#t[0]===0&&n.get(0)===0n)&&Atomics.notify(this.#t,0)})):e!==0&&await Atomics.waitAsync(this.#t,0,e).value}}[c.Send](){return[this.#e,this.#s,this.#i,this.#n]}static[c.Receive](t){return new this(...t,new Set)}}function ht(){return[F,N,O,P,at]}function v(s,t){const e=[...t];return[...s].reduce((i,n,r)=>i.set(n,e[r]),new Map)}var d=(s=>(s[s.u8=0]="u8",s[s.u16=1]="u16",s[s.u32=2]="u32",s[s.u64=3]="u64",s[s.i8=4]="i8",s[s.i16=5]="i16",s[s.i32=6]="i32",s[s.i64=7]="i64",s[s.f32=8]="f32",s[s.f64=9]="f64",s))(d||{});const E={[0]:1,[1]:2,[2]:4,[3]:8,[4]:1,[5]:2,[6]:4,[7]:8,[8]:4,[9]:8},x={[0]:Uint8Array,[1]:Uint16Array,[2]:Uint32Array,[3]:BigUint64Array,[4]:Int8Array,[5]:Int16Array,[6]:Int32Array,[7]:BigInt64Array,[8]:Float32Array,[9]:Float64Array};function _(s){return Object.values(s).reduce((t,e)=>t+E[e],0)}function ct(s){if(!s)return class{static schema={};static size=0};class t{static schema=s;static size=_(s);store;index;constructor(i,n){this.store=i,this.index=n}}for(const e in s){const i=Array.isArray(s)?Number(e):e;Object.defineProperty(t.prototype,i,{enumerable:!0,get(){return this.store[i][this.index]},set(n){this.store[i][this.index]=n}})}return t}function L(s,t){return new(s.threads>1?SharedArrayBuffer:ArrayBuffer)(t)}function ut(s,t,e){const i=L(t,s.size*e),n=Array.isArray(s.schema);let r=0;return Object.entries(s.schema).reduce((o,[a,h],f)=>{const l=n?f:a;return o[l]=new x[h](i,r,e),r+=e*E[h],o},n?[]:{})}const j=32n,ft=0x00000000ffffffffn,A=s=>Number(s&ft),D=s=>Number(s>>j);class w{static schema={val:d.u64};static size=8;store;index;commands;constructor(t,e,i){this.store=t,this.index=e,this.commands=i}get id(){return this.store.val[this.index]}get entityIndex(){return A(this.id)}get generation(){return D(this.id)}insert(t){return this.commands.insertInto(this.id,t),this}remove(t){return this.commands.removeFrom(this.id,t),this}despawn(){this.commands.despawn(this.id)}}function dt(s,t,e,i){const n=L(t,s.size*e),r=Array.isArray(i);let o=0;return Object.entries(s.schema).reduce((a,[h,f],l)=>{const m=r?l:h;return a[m]=new x[f](n,o,e),a[m].set(i[m],0),o+=e*E[f],a},r?[]:{})}class V{columns;meta;static create(t,e){const i=new Uint32Array(2);return i[1]=e,new this(t.reduce((n,r)=>n.set(r,ut(r,{threads:1},e)),new Map),i)}constructor(t,e){this.columns=t,this.meta=e}get size(){return this.meta[0]}set size(t){this.meta[0]=t}get capacity(){return this.meta[1]}get isFull(){return this.capacity===this.size}add(t){this.columns.get(w).val[this.size++]=t}delete(t){for(const[,e]of this.columns)for(const i in e)e[i][t]=e[i][this.size-1];this.size--}move(t,e){for(const[i,n]of this.columns)if(e.columns.has(i)){const r=e.columns.get(i);for(const o in n)r[o][e.size]=n[o][t],n[o][t]=n[o][this.size-1]}e.size++,this.size--}grow(t){for(const[e,i]of this.columns)dt(e,t,t.getNewTableSize(this.capacity),i)}}class lt{queue=new Map;#t;#e;#s;#i;constructor(t,e){this.#t=t,this.#s=new BigUint64Array(1),this.#e=new w({val:this.#s},0,this),this.#i=e}spawn(){const t=this.#t.spawn();return this.#s[0]=t,this.insertInto(t,w),this.#e}despawn(t){return this.queue.set(t,0n),this}get(t){return this.#s[0]=t,this.#e}insertInto(t,e){this.queue.set(t,(this.queue.get(t)??this.#t.getTableId(t))|1n<<BigInt(Q(this.#i,e)))}removeFrom(t,e){this.queue.set(t,(this.queue.get(t)??this.#t.getTableId(t))^1n<<BigInt(Q(this.#i,e)))}}const Q=(s,t)=>[...s].indexOf(t);class k{static async fromWorld(t){const e=t.maxEntities;return new k(new Uint32Array(e),new O(8,e,new Uint8Array(e)),new Uint32Array(e),new Uint32Array(3),new Uint32Array(e))}generations;tableIds;row;#t;#e;constructor(t,e,i,n,r){this.generations=t,this.tableIds=e,this.row=i,this.#t=n,this.#e=r}spawn(){for(let e=0;e<this.#e.length&&Atomics.load(this.#t,z.FreeCount)!==0;e++)for(;;){const i=Atomics.load(this.#e,e);if(i===0)break;const n=mt(i);if(Atomics.xor(this.#e,e,1<<n)===i)return Atomics.sub(this.#t,z.FreeCount,1),BigInt(this.generations[n])<<j|BigInt(32*e+n)}const t=Atomics.add(this.#t,z.NextId,1);return BigInt(t)}despawn(t){const e=A(t),i=D(t);Atomics.compareExchange(this.generations,e,i,i+1)===i&&(Atomics.or(this.#e,e>>5,1<<(e&31)),Atomics.add(this.#t,z.FreeCount,1))}getTableId(t){return this.tableIds.get(A(t))}getRow(t){return this.row[A(t)]}setLocation(t,e,i){this.tableIds.set(A(t),e),this.row[A(t)]=i}}const mt=s=>(s>>>=0,31-Math.clz32(s&-s));var z=(s=>(s[s.NextId=0]="NextId",s[s.FreeCount=1]="FreeCount",s[s.MaxCount=2]="MaxCount",s))(z||{});function gt(s){g(Object.keys(s).length!==0,"Shareable Resources created with Resource() must pass a schema!");class t{static create(n){return new this(new DataView(L(n,_(s))))}__$$;constructor(n){this.__$$=n}[c.Send](){return this.__$$}static[c.Receive](n){return new this(n)}}let e=0;for(const i in s){const n=Array.isArray(s)?Number(i):i,[r,o]=yt[s[n]];Object.defineProperty(t.prototype,n,{enumerable:!0,get(){return this.__$$[r](e)},set(a){this.__$$[o](e,a)}}),e+=E[s[n]]}return t}const yt={[d.u8]:["getUint8","setUint8"],[d.u16]:["getUint16","setUint16"],[d.u32]:["getUint32","setUint32"],[d.u64]:["getBigUint64","setBigUint64"],[d.i8]:["getInt8","setInt8"],[d.i16]:["getInt16","setInt16"],[d.i32]:["getInt32","setInt32"],[d.i64]:["getBigInt64","setBigInt64"],[d.f32]:["getFloat32","setFloat32"],[d.f64]:["getFloat64","setFloat64"]};function K(s,t){return wt(s)?s.create(t):new s}function wt(s){return"create"in s&&typeof s.create=="function"}class pt{isLocalToThread(){return!1}intersectsWith(t){return!1}intoArgument(t){return t.commands}onAddSystem(t){}}var y=(s=>(s[s.Read=0]="Read",s[s.Write=1]="Write",s))(y||{});function At(s,t){return bt(s,t)}const bt=(s,t)=>t.reduce((e,i)=>e|1n<<BigInt(s.indexOf(i)),0n);function M(s){return[s,1]}M.isMut=function(s){return Array.isArray(s)&&s.length===2&&typeof s[0]=="function"&&s[1]===1};class St{#t;#e=[];#s;#i;constructor(t,e,i){this.#i=e,this.#s=t,this.#t=this.#i.map(n=>new n({},0,i))}*[Symbol.iterator](){for(const t of this.#e)for(let e=0;e<t.size;e++){for(const i of this.#t){const n=t.columns.get(Object.getPrototypeOf(i).constructor);i.store=n,i.eid=e}yield this.#t}}testAdd(t,e){this.#n(t)&&this.#e.push(e)}#n(t){return(t&this.#s)===this.#s}}class W{components=[];accessType=[];constructor(t){for(const e of t){const i=M.isMut(e);this.components.push(i?e[0]:e),this.accessType.push(i?y.Write:y.Read)}}isLocalToThread(){return!1}intersectsWith(t){return t instanceof W?this.components.some((e,i)=>t.components.some((n,r)=>e===n&&(this.accessType[i]===y.Write||t.accessType[r]===y.Write))):!1}onAddSystem(t){this.components.forEach(e=>t.registerComponent(e))}intoArgument(t){const e=new St(At(t.components,this.components),this.components,t.commands);return t.queries.push(e),e}}class q{resource;accessType;constructor(t){const e=M.isMut(t);this.resource=e?t[0]:t,this.accessType=e?y.Write:y.Read}isLocalToThread(){return!B(this.resource)}intersectsWith(t){return t instanceof q?this.resource===t.resource&&(this.accessType===y.Write||t.accessType===y.Write):!1}onAddSystem(t){t.registerResource(this.resource),B(this.resource)&&t.registerSendableClass(this.resource)}intoArgument(t){return t.resources.get(this.resource)}}class Bt{isLocalToThread(){return!0}intersectsWith(t){return!0}intoArgument(t){return t}onAddSystem(t){}}function T(s){return(...t)=>new s(...t)}const X={Commands:T(pt),Query:T(W),Res:T(q),World:T(Bt)};function G(s,t){return{fn:t,parameters:s}}function*U(s){let t=0;for(;s!==0n;)(s&1n)===1n&&(yield t),s>>=1n,t++}function zt(s,t,e){const i=Array.from({length:s.length},()=>0n),n=(r,o)=>(i[r]&1n<<BigInt(o))!==0n;return t.forEach((r,o)=>{if(!!r){for(const a of r.before??[]){const h=s.indexOf(a);h!==-1&&(g(!n(o,h),`Circular dependency detected: ${s[o].fn.name} (${o}) and ${s[h].fn.name} (${h}) depend on each other.`),i[h]|=1n<<BigInt(o))}for(const a of r.after??[]){const h=s.indexOf(a);h!==-1&&(g(!n(h,o),`Circular dependency detected: ${s[o].fn.name} (${o}) and ${s[h].fn.name} (${h}) depend on each other.`),i[o]|=1n<<BigInt(h))}}}),i.forEach((r,o)=>{g(!n(o,o),`Circular dependency detected: ${s[o].fn.name} (${o}) and ${s[o].fn.name} (${o}) depend on each other.`)}),t.forEach((r,o)=>{if(!!r){if(r.beforeAll)for(const a of U(e[o]))a!==o&&(i[o]&1n<<BigInt(a))===0n&&(i[a]|=1n<<BigInt(o));if(r.afterAll)for(const a of U(e[o]))a!==o&&(i[a]&1n<<BigInt(o))===0n&&(i[o]|=1n<<BigInt(a))}}),i.forEach((r,o)=>i[o]&=e[o]),i}function Ct(s,t){return s.parameters.some(e=>t.parameters.some(i=>e.intersectsWith(i)||i.intersectsWith(e)))?1:0}function It(s){return s.map(t=>s.reduce((e,i,n)=>e|BigInt(Ct(t,i))<<BigInt(n),0n))}const Rt=(s,t)=>{for(const[e,i]of t){const n=s.get(e);n===void 0?s.set(e,i):n!==0n&&s.set(e,n|i)}return s},Z=G([X.World()],async function(t){const e=(await t.threads.send("thyseus::getCommandQueue")).reduce(Rt,t.commands.queue);for(const[i,n]of e)t.moveEntity(i,n);e.clear()});class Et{#t=[];#e=[];#s=[];#i=ht();#n=new Set;#r=new Set;#o;#a;constructor(t,e){this.#o=t,this.#a=e,this.registerComponent(w),this.addSystem(Z,{afterAll:!0})}get resources(){return this.#r}get components(){return this.#n}get config(){return this.#o}get url(){return this.#a}addSystem(t,e){return this.#t.push(t),this.#e.push(e),this.#h(t),this}addStartupSystem(t){return this.#s.push(t),this.#h(t),this}addPlugin(t){return t(this),this}registerComponent(t){return this.#n.add(t),this}registerResource(t){return this.#r.add(t),this}registerSendableClass(t){return B(t)&&this.#i.push(t),this}async build(){const t=p.spawn(this.#o.threads-1,this.#a,this.#i),e=await t.sendOrReceive(()=>{const h=It(this.#t),f=zt(this.#t,this.#e,h),l=this.#t.reduce((m,C,b)=>C.parameters.some(I=>I.isLocalToThread())?m.add(b):m,new Set);return P.from(h,f,l)}),i=v(this.#r,await t.sendOrReceive(()=>Array.from(this.#r,h=>B(h)?K(h,this.#o):null)));p.isMainThread&&this.#r.forEach(h=>{B(h)||i.set(h,K(h,this.#o))});const n=await k.fromWorld(this.#o),r=new lt(n,this.#n);t.setListener("thyseus::getCommandQueue",()=>{const h=new Map(r.queue);return r.queue.clear(),h});const o=[],a=new Y(this.#o,i,t,o,e,r,n,[...this.#n]);if(this.#t.forEach((h,f)=>o[f]=this.#c(h,a)),p.isMainThread)for(const{execute:h,args:f}of this.#s.map(l=>this.#c(l,a)))h(...f);return await t.sendOrReceive(()=>0),a}#h(t){t.parameters.forEach(e=>e.onAddSystem(this))}#c({fn:t,parameters:e},i){return{execute:t,args:e.map(n=>n.intoArgument(i))}}}const Mt=(s={})=>({threads:1,maxEntities:2**16,getNewTableSize:t=>t===0?8:t*2,...s}),Tt=({threads:s,maxEntities:t,getNewTableSize:e},i)=>{s>1&&(g(isSecureContext,"Invalid config - Multithreading (threads > 1) requires a secure context."),g(typeof SharedArrayBuffer<"u","Invalid config - Multithreading (threads > 1) requires SharedArrayBuffer."),g(i,"Invalid config - Multithreading (threads > 1) requires a module URL parameter.",TypeError)),g(Number.isInteger(s)&&0<s&&s<64,"Invalid config - 'threads' must be an integer such that 0 < threads < 64",RangeError),g(Number.isInteger(t)&&0<t&&t<2**32,"Invalid config - 'maxEntities' must be an integer such that 0 < maxEntities < 2**32",RangeError)};function Ut(s,t){const e=Mt(s);return Tt(e,t),e}const H="thyseus::newTable",J="thyseus::growTable";class Y{static new(t,e){return new Et(Ut(t,e),e)}archetypes=new Map;queries=[];config;resources;threads;#t;#e;commands;entities;components;constructor(t,e,i,n,r,o,a,h){this.config=t,this.resources=e,this.threads=i,this.#t=n,this.#e=r,this.commands=o,this.entities=a,this.components=h,this.threads.setListener(H,([f,l,m])=>{const C=v([...U(f)].map(I=>this.components[I]),l),b=new V(C,m);this.archetypes.set(f,b);for(const I of this.queries)I.testAdd(f,b)}),this.threads.setListener(J,([f,l])=>{const m=this.archetypes.get(f);let C=0;for(const b of m.columns.keys())m.columns.set(b,l[C++])}),this.#e.onReady(()=>this.#r())}moveEntity(t,e){const i=this.entities.getTableId(t),n=this.archetypes.get(i);if(e===0n){this.#s(t);return}const r=this.#i(e);r.isFull&&this.#n(e,r),n?(this.entities.setLocation(n.columns.get(w)[n.size-1],i,this.entities.getRow(t)),n.move(this.entities.getRow(t),r)):r.add(t),this.entities.setLocation(t,e,r.size-1)}#s(t){const e=this.entities.getTableId(t),i=this.archetypes.get(e);if(i){const n=this.entities.getRow(t);this.entities.setLocation(i.columns.get(w)?.val?.[i.size-1],e,n),i.delete(this.entities.getRow(t))}this.entities.setLocation(t,0n,0)}#i(t){if(!this.archetypes.has(t)){const e=V.create([...U(t)].map(i=>this.components[i]),this.config.getNewTableSize(0));this.threads.send(H,[t,[...e.columns.values()],e.meta]),this.archetypes.set(t,e);for(const i of this.queries)i.testAdd(t,e)}return this.archetypes.get(t)}#n(t,e){e.grow(this.config),this.threads.send(J,[t,[...e.columns.values()],e.meta])}async update(){this.#e.reset(),this.#e.start()}async#r(){for await(const t of this.#e){const e=this.#t[t];e.execute(...e.args)}this.#e.onReady(()=>this.#r())}}function Ot(s){return s}u.Component=ct,u.Entity=w,u.Mut=M,u.P=X,u.Resource=gt,u.ThreadProtocol=c,u.Type=d,u.applyCommands=Z,u.default=Y,u.definePlugin=Ot,u.defineSystem=G,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
